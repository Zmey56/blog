<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Курсовой проект “База данных на MySQL для рынка финансовых инструментов” | alex.gladkikh.org</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Курсовой проект “База данных на MySQL для рынка финансовых инструментов”" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Course project “MySQL database for the financial instruments market.”" />
<meta property="og:description" content="Course project “MySQL database for the financial instruments market.”" />
<link rel="canonical" href="https://zmey56.github.io/blog//course%20project/mysql/geekbrain/2021/09/04/course-project-classification.html" />
<meta property="og:url" content="https://zmey56.github.io/blog//course%20project/mysql/geekbrain/2021/09/04/course-project-classification.html" />
<meta property="og:site_name" content="alex.gladkikh.org" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-09-04T00:00:00-05:00" />
<script type="application/ld+json">
{"url":"https://zmey56.github.io/blog//course%20project/mysql/geekbrain/2021/09/04/course-project-classification.html","@type":"BlogPosting","headline":"Курсовой проект “База данных на MySQL для рынка финансовых инструментов”","dateModified":"2021-09-04T00:00:00-05:00","datePublished":"2021-09-04T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://zmey56.github.io/blog//course%20project/mysql/geekbrain/2021/09/04/course-project-classification.html"},"description":"Course project “MySQL database for the financial instruments market.”","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://zmey56.github.io/blog//feed.xml" title="alex.gladkikh.org" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-183752218-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>

<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">alex.gladkikh.org</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Курсовой проект &quot;База данных на MySQL для рынка финансовых инструментов&quot;</h1><p class="page-description">Course project "MySQL database for the financial instruments market."</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-09-04T00:00:00-05:00" itemprop="datePublished">
        Sep 4, 2021
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      23 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#course project">course project</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#mysql">mysql</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#geekbrain">geekbrain</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h3"><a href="#1-общее-текстовое-описание-базы-данных-и-решаемых-задач">1. Общее текстовое описание базы данных и решаемых задач</a></li>
<li class="toc-entry toc-h3"><a href="#2-cкрипты-создания-структуры-бд">2. Cкрипты создания структуры БД</a>
<ul>
<li class="toc-entry toc-h4"><a href="#currencies">CURRENCIES</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#3-скрипты-создания-отношений">3. Скрипты создания отношений</a></li>
<li class="toc-entry toc-h3"><a href="#4-создание-erdiagram-для-бд">4. Создание ERDiagram для БД</a></li>
<li class="toc-entry toc-h3"><a href="#5-cкрипты-наполнения-бд-данными">5. Cкрипты наполнения БД данными</a></li>
<li class="toc-entry toc-h3"><a href="#6-cкрипты-характерных-выборок">6. Cкрипты характерных выборок</a></li>
<li class="toc-entry toc-h3"><a href="#7-создание-триггеров">7. Создание триггеров</a></li>
</ul><p>Согласно представленному заданию мне было необходимо придумать тему и по ней создать базу данных.Вот общее описание проекта:</p>

<p><strong>Требования к курсовому проекту:</strong></p>
<ol>
  <li>Составить общее текстовое описание БД и решаемых ею задач;</li>
  <li>минимальное количество таблиц - 10;</li>
  <li>скрипты создания структуры БД (с первичными ключами, индексами, внешними ключами);</li>
  <li>создать ERDiagram для БД;</li>
  <li>скрипты наполнения БД данными;</li>
  <li>скрипты характерных выборок (включающие группировки, JOIN’ы, вложенные таблицы);</li>
  <li>представления (минимум 2);</li>
  <li>хранимые процедуры / триггеры;</li>
</ol>

<p><em>Примеры: описать модель хранения данных популярного веб-сайта: кинопоиск, booking.com, wikipedia, интернет-магазин, geekbrains, госуслуги…</em></p>

<p>За основу я взял <a href="https://vertabelo.com/blog/a-data-model-for-trading-stocks-funds-and-cryptocurrencies/">статью</a>, размещенную на иностранном источнике. В ней показана основная схема. Осталось только ее перевести в SQL. Прежде перевод теории.</p>

<p>Торговля криптовалютами, покупка акций и тому подобное в наши дни чрезвычайно популярны, так как это воспринимается как легкая прибыль. В настоящее время цены растут, но мы не можем знать, когда это изменится. С другой стороны, мы знаем, что в какой-то момент это произойдет. Но мы здесь не для того, чтобы делать финансовые прогнозы. Вместо этого мы поговорим о модели данных, которую можно использовать для поддержки торговли криптовалютами и финансовыми инструментами, такими как акции или акции фондов.</p>

<h3 id="1-общее-текстовое-описание-базы-данных-и-решаемых-задач">
<a class="anchor" href="#1-%D0%BE%D0%B1%D1%89%D0%B5%D0%B5-%D1%82%D0%B5%D0%BA%D1%81%D1%82%D0%BE%D0%B2%D0%BE%D0%B5-%D0%BE%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B1%D0%B0%D0%B7%D1%8B-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85-%D0%B8-%D1%80%D0%B5%D1%88%D0%B0%D0%B5%D0%BC%D1%8B%D1%85-%D0%B7%D0%B0%D0%B4%D0%B0%D1%87" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. Общее текстовое описание базы данных и решаемых задач</h3>

<p><strong>Что Вам нужно знать О Торговле Валютами и Акциями</strong></p>

<p>Технологические усовершенствования за последние несколько десятилетий оказали значительное влияние на торговлю. В настоящее время существует множество онлайн-торговых платформ, которые вы можете использовать. Большая часть сегодняшней торговли осуществляется виртуально – вы можете увидеть бумажные акции в музеях, но вряд ли вы увидите акции, которые вы покупаете в бумажной форме. И вам не нужно паковать чемоданы и отправляться на Уолл-стрит или любую другую фондовую биржу, чтобы совершить сделку. Не выходя из своего компьютера или мобильного устройства, вы можете покупать или продавать производные финансовые инструменты (такие как облигации, акции или товары).</p>

<p>Большинство сделок (продажа производных финансовых инструментов) следуют тем же правилам. Есть продавцы и покупатели. Если они договорятся о цене, сделка состоится. После сделки цена этого производного финансового инструмента будет пересчитана, и процесс продолжится с новыми трейдерами. Акции и другие производные финансовые инструменты работают точно так же.</p>

<p>Что такое криптовалюта? Вы, наверное, слышали о биткойне и других криптовалютах. Но что это такое? Криптовалюты похожи на виртуальные валюты, но они не привязаны к валютам реального мира (таким как евро или доллары). Вместо этого пользователи могут торговать криптовалютами между собой, как токенами. Затем они могут договориться о продаже, которая превратит их токены в реальные деньги. Эти продажи функционируют точно так же, как описанные выше сделки с акциями и акциями.</p>

<p>Эта тема сложна, и в нашей модели может быть много деталей (например, записи документов и транзакций). Я собираюсь сделать это просто; я не буду реализовывать какую-либо автоматическую торговлю или какие-либо формулы для создания новых цен после торгового события.</p>

<p>Перейдем к коду. Согласно статье база состоит из трех блоков:</p>

<ul>
  <li>CURRENCIES</li>
  <li>TRADERS</li>
  <li>ITEMS</li>
</ul>

<p>Теперь напишем код ля каждого блока:</p>

<h3 id="2-cкрипты-создания-структуры-бд">
<a class="anchor" href="#2-c%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D1%8F-%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D1%8B-%D0%B1%D0%B4" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. Cкрипты создания структуры БД</h3>

<h4 id="currencies">
<a class="anchor" href="#currencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>CURRENCIES</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">coursework_portfolio</span><span class="p">;</span>
<span class="n">USE</span> <span class="n">coursework_portfolio</span><span class="p">;</span>
</code></pre></div></div>

<p>Сначало создаю страну из которой осуществляется торговля</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="n">country</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">country</span><span class="p">(</span>
	<span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
	<span class="n">country</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span>
<span class="p">)</span> <span class="k">COMMENT</span> <span class="o">=</span> <span class="s1">'Страна из которой осуществляется торговля'</span><span class="p">;</span>
</code></pre></div></div>

<p>Валюту которую использует пользователь для торговли</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="n">currency_used</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">currency_used</span><span class="p">(</span>
	<span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
	<span class="n">country_id</span> <span class="nb">BIGINT</span> <span class="nb">UNSIGNED</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ключ на другую таблицу'</span><span class="p">,</span>
	<span class="n">currency_id</span> <span class="nb">INT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Ключ на другую таблицу'</span><span class="p">,</span>
	<span class="n">data_from</span> <span class="nb">DATETIME</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span> <span class="k">COMMENT</span> <span class="s1">'Дата начала использования валюты'</span><span class="p">,</span>
	<span class="n">data_to</span> <span class="nb">DATETIME</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span> <span class="k">COMMENT</span> <span class="s1">'Дата окончания использования валюты. Если NULL, то валюта до сих пор используется'</span>
<span class="p">)</span> <span class="k">COMMENT</span> <span class="o">=</span> <span class="s1">'Валюта использованная для покупки'</span><span class="p">;</span>

<span class="k">DESC</span> <span class="n">currency_used</span> <span class="p">;</span>
</code></pre></div></div>

<p>Хранятся текущие и исторические курсы между валютными парами.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="n">currency_rate</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">currency_rate</span><span class="p">(</span>
	<span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
	<span class="n">currency_id</span> <span class="nb">INT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Ключ на другую таблицу'</span><span class="p">,</span>
	<span class="n">base_currency_id</span> <span class="nb">INT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Ключ на другую таблицу'</span><span class="p">,</span>
	<span class="n">rate</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="mi">0</span> <span class="k">COMMENT</span> <span class="s1">'Курс валюты'</span><span class="p">,</span>
	<span class="n">ts</span> <span class="nb">DATETIME</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span> <span class="k">COMMENT</span> <span class="s1">'Время в которое данный курс был зафиксирован'</span>
<span class="p">)</span> <span class="k">COMMENT</span> <span class="o">=</span> <span class="s1">'Курс валюты'</span><span class="p">;</span>
</code></pre></div></div>

<p>Хранить все валюты, которые мы когда-либо использовали для торговли.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="n">currency</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">currency</span><span class="p">(</span>
	<span class="n">id</span> <span class="nb">INT</span> <span class="nb">UNSIGNED</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
	<span class="n">code</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">UNIQUE</span> <span class="k">COMMENT</span> <span class="s1">'Код используемый для уникального обозначения валюты'</span><span class="p">,</span>
	<span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">UNIQUE</span> <span class="k">COMMENT</span> <span class="s1">'Уникальное название этой валюты'</span><span class="p">,</span>
	<span class="n">is_active</span> <span class="nb">BOOL</span> <span class="k">DEFAULT</span> <span class="k">FALSE</span> <span class="k">COMMENT</span> <span class="s1">'Если валюта в настоящее время активна в нашей системе'</span><span class="p">,</span>
	<span class="n">is_base_currency</span> <span class="nb">BOOL</span> <span class="k">DEFAULT</span> <span class="k">FALSE</span> <span class="k">COMMENT</span> <span class="s1">'Если эта валюта является базовой валютой нашей системы.'</span>
<span class="p">)</span> <span class="k">COMMENT</span> <span class="o">=</span> <span class="s1">'Курс валюты'</span><span class="p">;</span>
</code></pre></div></div>

<p>####ITEMS</p>

<p>Таблицы item определяют все товары, доступные для торговли, и их текущий статус. Также здесь записываются все изменения, произошедшие с этими товарами с течением времени.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="n">item</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">item</span><span class="p">(</span>
	<span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
	<span class="n">code</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">UNIQUE</span> <span class="k">COMMENT</span> <span class="s1">'Код используемый для уникального обозначения товара(акции, ПИФы и т.д.)'</span><span class="p">,</span>
	<span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">UNIQUE</span> <span class="k">COMMENT</span> <span class="s1">'Полное имя'</span><span class="p">,</span>
	<span class="n">is_active</span> <span class="nb">BOOL</span> <span class="k">DEFAULT</span> <span class="k">FALSE</span> <span class="k">COMMENT</span> <span class="s1">'Доступен ли этот товар для торговли или нет'</span><span class="p">,</span>
	<span class="n">currency_id</span> <span class="nb">INT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Ссылается на валюту, используемую в качестве базовой валюты для данного товара'</span><span class="p">,</span>
	<span class="n">details</span> <span class="nb">TEXT</span> <span class="k">COMMENT</span> <span class="s1">'Все дополнительные сведения (например, количество выпущенных акций) в текстовом формате.'</span>
<span class="p">)</span> <span class="k">COMMENT</span> <span class="o">=</span> <span class="s1">'Доступные товары'</span><span class="p">;</span>
</code></pre></div></div>

<p>Таблица цен отслеживает все изменения цен во времени.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="n">price</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">price</span><span class="p">(</span>
	<span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
	<span class="n">item_id</span> <span class="nb">BIGINT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Ссылается на валюту, используемую в качестве базовой валюты для данного товара'</span><span class="p">,</span>
	<span class="n">currency_id</span> <span class="nb">INT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Ссылается на валюту, используемую в качестве базовой валюты для данного товара'</span><span class="p">,</span>
	<span class="n">buy</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="mi">0</span> <span class="k">COMMENT</span> <span class="s1">'Курс покупки'</span><span class="p">,</span>
	<span class="n">sell</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="mi">0</span> <span class="k">COMMENT</span> <span class="s1">'Курс продажи'</span><span class="p">,</span>
	<span class="n">ts</span> <span class="nb">DATETIME</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span> <span class="k">COMMENT</span> <span class="s1">'Время в которое сделка по последней цене была зафиксирована'</span>
<span class="p">)</span> <span class="k">COMMENT</span> <span class="o">=</span> <span class="s1">'Изменение цены'</span><span class="p">;</span>
</code></pre></div></div>

<p>Таблица отчета</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="n">report</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">report</span><span class="p">(</span>
	<span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
	<span class="n">trading_data</span> <span class="nb">DATETIME</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span> <span class="k">COMMENT</span> <span class="s1">'Дата отчета'</span><span class="p">,</span>
	<span class="n">item_id</span> <span class="nb">BIGINT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Ссылается на валюту, используемую в качестве базовой валюты для данного товара'</span><span class="p">,</span>
	<span class="n">currency_id</span> <span class="nb">INT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Ссылается на валюту, используемую в качестве базовой валюты для данного товара'</span><span class="p">,</span>
	<span class="n">first_price</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Начальная цена'</span><span class="p">,</span>
	<span class="n">last_price</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Последняя цена'</span><span class="p">,</span>
	<span class="n">min_price</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Минимальная цена'</span><span class="p">,</span>
	<span class="n">max_price</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Максимальная цена'</span><span class="p">,</span>
	<span class="n">avg_price</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Средняя цена'</span><span class="p">,</span>
	<span class="n">total_amount</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Общая сумма, уплаченная за этот товар в течение отчетного периода.'</span><span class="p">,</span>
	<span class="n">quantity</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Количество товаров, проданных в течение данного отчетного периода.'</span>
<span class="p">)</span> <span class="k">COMMENT</span> <span class="o">=</span> <span class="s1">'Отчет'</span><span class="p">;</span>
</code></pre></div></div>

<p>####TRADERS</p>

<p>Таблица трейдеров</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="n">trader</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">trader</span> <span class="p">(</span>
	<span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">firstname</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">COMMENT</span> <span class="s1">'Имя'</span><span class="p">,</span>
    <span class="n">lastname</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">COMMENT</span> <span class="s1">'Фамилия'</span><span class="p">,</span>
    <span class="n">user_name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">UNIQUE</span> <span class="k">COMMENT</span> <span class="s1">'Логин у всех уникальный'</span><span class="p">,</span>
    <span class="n">email</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">UNIQUE</span><span class="p">,</span>
    <span class="n">confirmation_code</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Код, отправленный пользователю для завершения процесса регистрации.'</span><span class="p">,</span>
    <span class="n">time_registered</span> <span class="nb">DATETIME</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
    <span class="n">time_confirmed</span> <span class="nb">DATETIME</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
    <span class="n">country_id</span> <span class="nb">BIGINT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Страна, в которой живет.'</span><span class="p">,</span>
    <span class="n">preffered_currency_id</span> <span class="nb">BIGINT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Валюта, которую трейдер предпочитает'</span>
<span class="p">)</span> <span class="k">COMMENT</span> <span class="s1">'юзеры'</span><span class="p">;</span>
</code></pre></div></div>

<p>Список всех товаров, которыми в настоящее время владеет трейдер</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="n">current_inventory</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">current_inventory</span> <span class="p">(</span>
	<span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
	<span class="n">trader_id</span> <span class="nb">BIGINT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Ссылка на трейдера'</span><span class="p">,</span>
	<span class="n">item_id</span> <span class="nb">BIGINT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Ссылка на товар'</span><span class="p">,</span>
	<span class="n">quantity</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Количество товаров'</span>
<span class="p">)</span> <span class="k">COMMENT</span> <span class="s1">'Список товаров'</span><span class="p">;</span>
</code></pre></div></div>

<p>Торговое событие</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="n">trade</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">trade</span> <span class="p">(</span>
	<span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
	<span class="n">item_id</span> <span class="nb">BIGINT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Ссылка на товар'</span><span class="p">,</span>
	<span class="n">seller_id</span> <span class="nb">BIGINT</span> <span class="nb">UNSIGNED</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ссылка на трейдера'</span><span class="p">,</span>
	<span class="n">buyer_id</span> <span class="nb">BIGINT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Ссылка на трейдера'</span><span class="p">,</span>
	<span class="n">quantity</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Количество товаров'</span><span class="p">,</span>
	<span class="n">unit_price</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Цена за единицу'</span><span class="p">,</span>
	<span class="n">description</span> <span class="nb">TEXT</span> <span class="k">COMMENT</span> <span class="s1">'Все дополнительные сведения (например, количество выпущенных акций) в текстовом формате.'</span><span class="p">,</span>
	<span class="n">offer_id</span> <span class="nb">BIGINT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Индификатор сделки'</span>
<span class="p">)</span> <span class="k">COMMENT</span> <span class="s1">'Сделки'</span><span class="p">;</span>
</code></pre></div></div>

<p>Учет всех предложений</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="n">offer</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">offer</span> <span class="p">(</span>
	<span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
	<span class="n">item_id</span> <span class="nb">BIGINT</span> <span class="nb">UNSIGNED</span> <span class="k">COMMENT</span> <span class="s1">'Ссылка на товар'</span><span class="p">,</span>
	<span class="n">trader_id</span> <span class="nb">BIGINT</span> <span class="nb">UNSIGNED</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ссылка на трейдера'</span><span class="p">,</span>
	<span class="n">quantity</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Количество товаров'</span><span class="p">,</span>
	<span class="n">buy</span> <span class="nb">BOOL</span> <span class="k">DEFAULT</span> <span class="k">FALSE</span><span class="p">,</span>
	<span class="n">sell</span> <span class="nb">BOOL</span> <span class="k">DEFAULT</span> <span class="k">FALSE</span><span class="p">,</span>
	<span class="n">price</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Желаемая цена за единицу'</span><span class="p">,</span>
	<span class="n">ts</span> <span class="nb">DATETIME</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span> <span class="k">COMMENT</span> <span class="s1">'Когда была выставлена'</span><span class="p">,</span>
	<span class="n">is_active</span> <span class="nb">BOOL</span> <span class="k">DEFAULT</span> <span class="k">FALSE</span> <span class="k">COMMENT</span> <span class="s1">'Действует ли еще это предложение'</span>
<span class="p">)</span> <span class="k">COMMENT</span> <span class="s1">'Сделки'</span><span class="p">;</span>
</code></pre></div></div>

<p>так же решил добавить в traders колонку дней рождений birthday</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">trader</span>
  <span class="k">DROP</span> <span class="k">COLUMN</span> <span class="n">birthday</span><span class="p">;</span>

<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">trader</span>
<span class="k">ADD</span> <span class="k">COLUMN</span> <span class="n">birthday</span> <span class="nb">DATE</span> <span class="p">;</span>
</code></pre></div></div>

<h3 id="3-скрипты-создания-отношений">
<a class="anchor" href="#3-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D1%8F-%D0%BE%D1%82%D0%BD%D0%BE%D1%88%D0%B5%D0%BD%D0%B8%D0%B9" aria-hidden="true"><span class="octicon octicon-link"></span></a>3. Скрипты создания отношений</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">USE</span> <span class="n">coursework_portfolio</span><span class="p">;</span>
</code></pre></div></div>

<p>связь один ко многим courtry - currency_used</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">currency_used</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">currency_used_country_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">country_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">country</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим currency - currency_used</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">currency_used</span>
<span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">currency_used_currency_fk</span>
<span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">currency_id</span><span class="p">)</span>
<span class="k">REFERENCES</span> <span class="n">currency</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим currency - currency_rate</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">currency_rate</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">currency_currency_rate_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">currency_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">currency</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">currency_rate</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">currency_currency_rate_base_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">base_currency_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">currency</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим currency - price</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">price</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">currency_price_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">currency_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">currency</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим currency - item</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">item</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">currency_item_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">currency_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">currency</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим price - item</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">price</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">item_price_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">item</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим report - item</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">report</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">report_item_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">item</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим report - currency</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">report</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">currency_report_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">currency_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">currency</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим trader - currency</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">trader</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">country_trader_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">country_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">country</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим trade - trader</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">trade</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">trader_trade_sell_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">seller_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">trader</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим trade - trader</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">trade</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">trader_trade_buy_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">buyer_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">trader</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим trade - offer</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">trade</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">offer_trade_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">offer_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">offer</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим trade - item</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">trade</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">item_trade_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">item</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим offer - trader</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">offer</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">trader_offer_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">trader_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">trader</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим offer - item</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">offer</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">item_offer_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">item</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим Current_inventory - trader</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">current_inventory</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">trader_current_inventory_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">trader_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">trader</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>связь один ко многим Current_inventory - item</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">current_inventory</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">item_current_inventory_fk</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">item</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="4-создание-erdiagram-для-бд">
<a class="anchor" href="#4-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-erdiagram-%D0%B4%D0%BB%D1%8F-%D0%B1%D0%B4" aria-hidden="true"><span class="octicon octicon-link"></span></a>4. Создание ERDiagram для БД</h3>

<p>В результате получилось следующая схема:
<img src="images/ER_diagram.png" alt=""></p>

<h3 id="5-cкрипты-наполнения-бд-данными">
<a class="anchor" href="#5-c%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B-%D0%BD%D0%B0%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B1%D0%B4-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC%D0%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>5. Cкрипты наполнения БД данными</h3>

<p>Наполнение сделал через популярный сайт для генерации фейковых данных <a href="http://filldb.info/">Dummy Data for MYSQL Database</a></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">coursework_portfolio</span><span class="p">;</span>

<span class="c1">-- MariaDB dump 10.17  Distrib 10.4.15-MariaDB, for Linux (x86_64)</span>
<span class="c1">--</span>
<span class="c1">-- Host: mysql.hostinger.ro    Database: u574849695_20</span>
<span class="c1">-- ------------------------------------------------------</span>
<span class="c1">-- Server version	10.4.15-MariaDB-cll-lve</span>

<span class="cm">/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */</span><span class="p">;</span>
<span class="cm">/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */</span><span class="p">;</span>
<span class="cm">/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */</span><span class="p">;</span>
<span class="cm">/*!40101 SET NAMES utf8mb4 */</span><span class="p">;</span>
<span class="cm">/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */</span><span class="p">;</span>
<span class="cm">/*!40103 SET TIME_ZONE='+00:00' */</span><span class="p">;</span>
<span class="cm">/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */</span><span class="p">;</span>
<span class="cm">/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */</span><span class="p">;</span>
<span class="cm">/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */</span><span class="p">;</span>
<span class="cm">/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Table structure for table `country`</span>
<span class="c1">--</span>
<span class="n">USE</span> <span class="n">coursework_portfolio</span><span class="p">;</span>

<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="nv">`country`</span><span class="p">;</span>
<span class="cm">/*!40101 SET @saved_cs_client     = @@character_set_client */</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = utf8 */</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`country`</span> <span class="p">(</span>
  <span class="nv">`id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="nv">`country`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span> <span class="k">COLLATE</span> <span class="n">utf8mb4_unicode_ci</span> <span class="k">DEFAULT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">11</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span> <span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_unicode_ci</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">'Страна из которой осуществляется торговля'</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = @saved_cs_client */</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Dumping data for table `country`</span>
<span class="c1">--</span>

<span class="k">LOCK</span> <span class="n">TABLES</span> <span class="nv">`country`</span> <span class="k">WRITE</span><span class="p">;</span>
<span class="cm">/*!40000 ALTER TABLE `country` DISABLE KEYS */</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nv">`country`</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">'Bermuda'</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">'Christmas Island'</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="s1">'Holy See (Vatican City State)'</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="s1">'Macedonia'</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="s1">'Qatar'</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="s1">'Tokelau'</span><span class="p">),(</span><span class="mi">7</span><span class="p">,</span><span class="s1">'Romania'</span><span class="p">),(</span><span class="mi">8</span><span class="p">,</span><span class="s1">'Central African Republic'</span><span class="p">),(</span><span class="mi">9</span><span class="p">,</span><span class="s1">'Uganda'</span><span class="p">),(</span><span class="mi">10</span><span class="p">,</span><span class="s1">'Saint Pierre and Miquelon'</span><span class="p">);</span>
<span class="cm">/*!40000 ALTER TABLE `country` ENABLE KEYS */</span><span class="p">;</span>
<span class="n">UNLOCK</span> <span class="n">TABLES</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Table structure for table `currency`</span>
<span class="c1">--</span>

<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="nv">`currency`</span><span class="p">;</span>
<span class="cm">/*!40101 SET @saved_cs_client     = @@character_set_client */</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = utf8 */</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`currency`</span> <span class="p">(</span>
  <span class="nv">`id`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="nv">`code`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">COLLATE</span> <span class="n">utf8mb4_unicode_ci</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Код используемый для уникального обозначения валюты'</span><span class="p">,</span>
  <span class="nv">`name`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span> <span class="k">COLLATE</span> <span class="n">utf8mb4_unicode_ci</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Уникальное название этой валюты'</span><span class="p">,</span>
  <span class="nv">`is_active`</span> <span class="nb">tinyint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="mi">0</span> <span class="k">COMMENT</span> <span class="s1">'Если валюта в настоящее время активна в нашей системе'</span><span class="p">,</span>
  <span class="nv">`is_base_currency`</span> <span class="nb">tinyint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="mi">0</span> <span class="k">COMMENT</span> <span class="s1">'Если эта валюта является базовой валютой нашей системы.'</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">),</span>
  <span class="k">UNIQUE</span> <span class="k">KEY</span> <span class="nv">`code`</span> <span class="p">(</span><span class="nv">`code`</span><span class="p">),</span>
  <span class="k">UNIQUE</span> <span class="k">KEY</span> <span class="nv">`name`</span> <span class="p">(</span><span class="nv">`name`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span> <span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_unicode_ci</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">'Курс валюты'</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = @saved_cs_client */</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Dumping data for table `currency`</span>
<span class="c1">--</span>

<span class="k">LOCK</span> <span class="n">TABLES</span> <span class="nv">`currency`</span> <span class="k">WRITE</span><span class="p">;</span>
<span class="cm">/*!40000 ALTER TABLE `currency` DISABLE KEYS */</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nv">`currency`</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s1">'htxs'</span><span class="p">,</span><span class="s1">'eaque'</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="s1">'nnlp'</span><span class="p">,</span><span class="s1">'soluta'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">'dtlh'</span><span class="p">,</span><span class="s1">'quis'</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="s1">'wimu'</span><span class="p">,</span><span class="s1">'animi'</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="s1">'lnag'</span><span class="p">,</span><span class="s1">'earum'</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="s1">'ekbd'</span><span class="p">,</span><span class="s1">'molestiae'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="s1">'nivw'</span><span class="p">,</span><span class="s1">'nam'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">7</span><span class="p">,</span><span class="s1">'zldi'</span><span class="p">,</span><span class="s1">'consequuntur'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">8</span><span class="p">,</span><span class="s1">'zyrs'</span><span class="p">,</span><span class="s1">'qui'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">9</span><span class="p">,</span><span class="s1">'uvfn'</span><span class="p">,</span><span class="s1">'blanditiis'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="cm">/*!40000 ALTER TABLE `currency` ENABLE KEYS */</span><span class="p">;</span>
<span class="n">UNLOCK</span> <span class="n">TABLES</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Table structure for table `currency_rate`</span>
<span class="c1">--</span>

<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="nv">`currency_rate`</span><span class="p">;</span>
<span class="cm">/*!40101 SET @saved_cs_client     = @@character_set_client */</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = utf8 */</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`currency_rate`</span> <span class="p">(</span>
  <span class="nv">`id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="nv">`currency_id`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ключ на другую таблицу'</span><span class="p">,</span>
  <span class="nv">`base_currency_id`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ключ на другую таблицу'</span><span class="p">,</span>
  <span class="nv">`rate`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000000</span> <span class="k">COMMENT</span> <span class="s1">'Курс валюты'</span><span class="p">,</span>
  <span class="nv">`ts`</span> <span class="nb">datetime</span> <span class="k">DEFAULT</span> <span class="k">current_timestamp</span><span class="p">()</span> <span class="k">COMMENT</span> <span class="s1">'Время в которое данный курс был зафиксирован'</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">11</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span> <span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_unicode_ci</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">'Курс валюты'</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = @saved_cs_client */</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Dumping data for table `currency_rate`</span>
<span class="c1">--</span>

<span class="k">LOCK</span> <span class="n">TABLES</span> <span class="nv">`currency_rate`</span> <span class="k">WRITE</span><span class="p">;</span>
<span class="cm">/*!40000 ALTER TABLE `currency_rate` DISABLE KEYS */</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nv">`currency_rate`</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">248964</span><span class="p">.</span><span class="mi">149700</span><span class="p">,</span><span class="s1">'1992-06-09 14:41:36'</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">390368</span><span class="p">.</span><span class="mi">888800</span><span class="p">,</span><span class="s1">'2017-09-18 05:43:25'</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="s1">'2001-11-16 22:01:24'</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">50</span><span class="p">.</span><span class="mi">506542</span><span class="p">,</span><span class="s1">'1979-06-15 23:49:48'</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">81</span><span class="p">.</span><span class="mi">498779</span><span class="p">,</span><span class="s1">'1984-06-23 02:36:52'</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">584941</span><span class="p">.</span><span class="mi">290982</span><span class="p">,</span><span class="s1">'1970-04-04 16:47:28'</span><span class="p">),(</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6265204</span><span class="p">.</span><span class="mi">580000</span><span class="p">,</span><span class="s1">'1979-09-29 09:25:05'</span><span class="p">),(</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">16</span><span class="p">.</span><span class="mi">154948</span><span class="p">,</span><span class="s1">'2010-12-21 00:43:41'</span><span class="p">),(</span><span class="mi">9</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">.</span><span class="mi">630000</span><span class="p">,</span><span class="s1">'1986-04-16 05:48:55'</span><span class="p">),(</span><span class="mi">10</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">2</span><span class="p">.</span><span class="mi">800000</span><span class="p">,</span><span class="s1">'1984-10-06 10:07:42'</span><span class="p">);</span>
<span class="cm">/*!40000 ALTER TABLE `currency_rate` ENABLE KEYS */</span><span class="p">;</span>
<span class="n">UNLOCK</span> <span class="n">TABLES</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Table structure for table `currency_used`</span>
<span class="c1">--</span>

<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="nv">`currency_used`</span><span class="p">;</span>
<span class="cm">/*!40101 SET @saved_cs_client     = @@character_set_client */</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = utf8 */</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`currency_used`</span> <span class="p">(</span>
  <span class="nv">`id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="nv">`country_id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ключ на другую таблицу'</span><span class="p">,</span>
  <span class="nv">`currency_id`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ключ на другую таблицу'</span><span class="p">,</span>
  <span class="nv">`data_from`</span> <span class="nb">datetime</span> <span class="k">DEFAULT</span> <span class="k">current_timestamp</span><span class="p">()</span> <span class="k">COMMENT</span> <span class="s1">'Дата начала использования валюты'</span><span class="p">,</span>
  <span class="nv">`data_to`</span> <span class="nb">datetime</span> <span class="k">DEFAULT</span> <span class="k">current_timestamp</span><span class="p">()</span> <span class="k">COMMENT</span> <span class="s1">'Дата окончания использования валюты. Если NULL, то валюта до сих пор используется'</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">11</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span> <span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_unicode_ci</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">'Валюта использованная для покупки'</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = @saved_cs_client */</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Dumping data for table `currency_used`</span>
<span class="c1">--</span>

<span class="k">LOCK</span> <span class="n">TABLES</span> <span class="nv">`currency_used`</span> <span class="k">WRITE</span><span class="p">;</span>
<span class="cm">/*!40000 ALTER TABLE `currency_used` DISABLE KEYS */</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nv">`currency_used`</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s1">'1972-07-14 21:53:10'</span><span class="p">,</span><span class="s1">'1989-06-25 02:18:23'</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">'1970-03-19 12:37:26'</span><span class="p">,</span><span class="s1">'2018-12-11 16:34:23'</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s1">'1989-06-15 13:50:05'</span><span class="p">,</span><span class="s1">'1985-06-10 17:07:32'</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s1">'2008-09-26 16:36:58'</span><span class="p">,</span><span class="s1">'1992-01-21 09:35:20'</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="s1">'1984-09-02 16:32:24'</span><span class="p">,</span><span class="s1">'2019-07-25 03:33:31'</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="s1">'2018-10-02 04:32:51'</span><span class="p">,</span><span class="s1">'1973-08-23 18:43:00'</span><span class="p">),(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="s1">'2004-07-04 22:17:20'</span><span class="p">,</span><span class="s1">'1990-11-19 16:48:34'</span><span class="p">),(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="s1">'2007-06-25 10:34:33'</span><span class="p">,</span><span class="s1">'1997-09-16 08:51:40'</span><span class="p">),(</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="s1">'1977-10-01 11:13:18'</span><span class="p">,</span><span class="s1">'1985-03-05 19:28:04'</span><span class="p">),(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="s1">'1987-03-28 10:28:24'</span><span class="p">,</span><span class="s1">'2003-02-05 18:20:56'</span><span class="p">);</span>
<span class="cm">/*!40000 ALTER TABLE `currency_used` ENABLE KEYS */</span><span class="p">;</span>
<span class="n">UNLOCK</span> <span class="n">TABLES</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Table structure for table `current_inventory`</span>
<span class="c1">--</span>

<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="nv">`current_inventory`</span><span class="p">;</span>
<span class="cm">/*!40101 SET @saved_cs_client     = @@character_set_client */</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = utf8 */</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`current_inventory`</span> <span class="p">(</span>
  <span class="nv">`id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="nv">`trader_id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ссылка на трейдера'</span><span class="p">,</span>
  <span class="nv">`item_id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ссылка на товар'</span><span class="p">,</span>
  <span class="nv">`quantity`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Количество товаров'</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">11</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span> <span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_unicode_ci</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">'Список товаров'</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = @saved_cs_client */</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Dumping data for table `current_inventory`</span>
<span class="c1">--</span>

<span class="k">LOCK</span> <span class="n">TABLES</span> <span class="nv">`current_inventory`</span> <span class="k">WRITE</span><span class="p">;</span>
<span class="cm">/*!40000 ALTER TABLE `current_inventory` DISABLE KEYS */</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nv">`current_inventory`</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">8421</span><span class="p">.</span><span class="mi">000000</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">969106</span><span class="p">.</span><span class="mi">000000</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">9235206</span><span class="p">.</span><span class="mi">000000</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">92961</span><span class="p">.</span><span class="mi">000000</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">145700</span><span class="p">.</span><span class="mi">000000</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">),(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">19133</span><span class="p">.</span><span class="mi">000000</span><span class="p">),(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">),(</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">26582</span><span class="p">.</span><span class="mi">000000</span><span class="p">),(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">78483052</span><span class="p">.</span><span class="mi">000000</span><span class="p">);</span>
<span class="cm">/*!40000 ALTER TABLE `current_inventory` ENABLE KEYS */</span><span class="p">;</span>
<span class="n">UNLOCK</span> <span class="n">TABLES</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Table structure for table `item`</span>
<span class="c1">--</span>

<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="nv">`item`</span><span class="p">;</span>
<span class="cm">/*!40101 SET @saved_cs_client     = @@character_set_client */</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = utf8 */</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`item`</span> <span class="p">(</span>
  <span class="nv">`id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="nv">`code`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span> <span class="k">COLLATE</span> <span class="n">utf8mb4_unicode_ci</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Код используемый для уникального обозначения товара(акции, ПИФы и т.д.)'</span><span class="p">,</span>
  <span class="nv">`name`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">COLLATE</span> <span class="n">utf8mb4_unicode_ci</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Полное имя'</span><span class="p">,</span>
  <span class="nv">`is_active`</span> <span class="nb">tinyint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="mi">0</span> <span class="k">COMMENT</span> <span class="s1">'Доступен ли этот товар для торговли или нет'</span><span class="p">,</span>
  <span class="nv">`currency_id`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ссылается на валюту, используемую в качестве базовой валюты для данного товара'</span><span class="p">,</span>
  <span class="nv">`details`</span> <span class="nb">text</span> <span class="k">COLLATE</span> <span class="n">utf8mb4_unicode_ci</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Все дополнительные сведения (например, количество выпущенных акций) в текстовом формате.'</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">),</span>
  <span class="k">UNIQUE</span> <span class="k">KEY</span> <span class="nv">`code`</span> <span class="p">(</span><span class="nv">`code`</span><span class="p">),</span>
  <span class="k">UNIQUE</span> <span class="k">KEY</span> <span class="nv">`name`</span> <span class="p">(</span><span class="nv">`name`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">11</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span> <span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_unicode_ci</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">'Доступные товары'</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = @saved_cs_client */</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Dumping data for table `item`</span>
<span class="c1">--</span>

<span class="k">LOCK</span> <span class="n">TABLES</span> <span class="nv">`item`</span> <span class="k">WRITE</span><span class="p">;</span>
<span class="cm">/*!40000 ALTER TABLE `item` DISABLE KEYS */</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nv">`item`</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">'kzgb'</span><span class="p">,</span><span class="s1">'doloremque'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="k">NULL</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">'krcn'</span><span class="p">,</span><span class="s1">'omnis'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="k">NULL</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="s1">'ywfp'</span><span class="p">,</span><span class="s1">'rerum'</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="k">NULL</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="s1">'bbjq'</span><span class="p">,</span><span class="s1">'eaque'</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="k">NULL</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="s1">'hsib'</span><span class="p">,</span><span class="s1">'quis'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="k">NULL</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="s1">'dnuf'</span><span class="p">,</span><span class="s1">'quia'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="k">NULL</span><span class="p">),(</span><span class="mi">7</span><span class="p">,</span><span class="s1">'wnfb'</span><span class="p">,</span><span class="s1">'numquam'</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="k">NULL</span><span class="p">),(</span><span class="mi">8</span><span class="p">,</span><span class="s1">'pefi'</span><span class="p">,</span><span class="s1">'quos'</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="k">NULL</span><span class="p">),(</span><span class="mi">9</span><span class="p">,</span><span class="s1">'vbrv'</span><span class="p">,</span><span class="s1">'expedita'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="k">NULL</span><span class="p">),(</span><span class="mi">10</span><span class="p">,</span><span class="s1">'afem'</span><span class="p">,</span><span class="s1">'esse'</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="k">NULL</span><span class="p">);</span>
<span class="cm">/*!40000 ALTER TABLE `item` ENABLE KEYS */</span><span class="p">;</span>
<span class="n">UNLOCK</span> <span class="n">TABLES</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Table structure for table `offer`</span>
<span class="c1">--</span>

<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="nv">`offer`</span><span class="p">;</span>
<span class="cm">/*!40101 SET @saved_cs_client     = @@character_set_client */</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = utf8 */</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`offer`</span> <span class="p">(</span>
  <span class="nv">`id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="nv">`item_id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ссылка на товар'</span><span class="p">,</span>
  <span class="nv">`trader_id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ссылка на трейдера'</span><span class="p">,</span>
  <span class="nv">`quantity`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Количество товаров'</span><span class="p">,</span>
  <span class="nv">`buy`</span> <span class="nb">tinyint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nv">`sell`</span> <span class="nb">tinyint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nv">`price`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Желаемая цена за единицу'</span><span class="p">,</span>
  <span class="nv">`ts`</span> <span class="nb">datetime</span> <span class="k">DEFAULT</span> <span class="k">current_timestamp</span><span class="p">()</span> <span class="k">COMMENT</span> <span class="s1">'Когда была выставлена'</span><span class="p">,</span>
  <span class="nv">`is_active`</span> <span class="nb">tinyint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="mi">0</span> <span class="k">COMMENT</span> <span class="s1">'Действует ли еще это предложение'</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">11</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span> <span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_unicode_ci</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">'Сделки'</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = @saved_cs_client */</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Dumping data for table `offer`</span>
<span class="c1">--</span>

<span class="k">LOCK</span> <span class="n">TABLES</span> <span class="nv">`offer`</span> <span class="k">WRITE</span><span class="p">;</span>
<span class="cm">/*!40000 ALTER TABLE `offer` DISABLE KEYS */</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nv">`offer`</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4492564</span><span class="p">.</span><span class="mi">690000</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3560</span><span class="p">.</span><span class="mi">226016</span><span class="p">,</span><span class="s1">'1978-04-16 05:11:17'</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">88065</span><span class="p">.</span><span class="mi">115876</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">25673</span><span class="p">.</span><span class="mi">801940</span><span class="p">,</span><span class="s1">'2012-01-27 00:48:33'</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">57342</span><span class="p">.</span><span class="mi">670793</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5968955</span><span class="p">.</span><span class="mi">094700</span><span class="p">,</span><span class="s1">'1994-04-03 09:01:57'</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">841573</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">43</span><span class="p">.</span><span class="mi">341753</span><span class="p">,</span><span class="s1">'2016-01-27 13:50:13'</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">21273859</span><span class="p">.</span><span class="mi">908703</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1003</span><span class="p">.</span><span class="mi">024800</span><span class="p">,</span><span class="s1">'1976-04-11 21:39:31'</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">330151</span><span class="p">.</span><span class="mi">950000</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">908693</span><span class="p">,</span><span class="s1">'2005-12-14 22:57:53'</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">270663059</span><span class="p">.</span><span class="mi">774970</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">105</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="s1">'1988-11-26 14:32:08'</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">242300815</span><span class="p">.</span><span class="mi">081650</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">418</span><span class="p">.</span><span class="mi">591556</span><span class="p">,</span><span class="s1">'2009-01-04 11:59:22'</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">43</span><span class="p">.</span><span class="mi">108410</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">175276231</span><span class="p">.</span><span class="mi">966730</span><span class="p">,</span><span class="s1">'1980-11-30 22:09:40'</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">35074063</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3151</span><span class="p">.</span><span class="mi">711086</span><span class="p">,</span><span class="s1">'2007-11-07 11:28:43'</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="cm">/*!40000 ALTER TABLE `offer` ENABLE KEYS */</span><span class="p">;</span>
<span class="n">UNLOCK</span> <span class="n">TABLES</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Table structure for table `price`</span>
<span class="c1">--</span>

<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="nv">`price`</span><span class="p">;</span>
<span class="cm">/*!40101 SET @saved_cs_client     = @@character_set_client */</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = utf8 */</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`price`</span> <span class="p">(</span>
  <span class="nv">`id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="nv">`item_id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ссылается на валюту, используемую в качестве базовой валюты для данного товара'</span><span class="p">,</span>
  <span class="nv">`currency_id`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ссылается на валюту, используемую в качестве базовой валюты для данного товара'</span><span class="p">,</span>
  <span class="nv">`buy`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000000</span> <span class="k">COMMENT</span> <span class="s1">'Курс покупки'</span><span class="p">,</span>
  <span class="nv">`sell`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000000</span> <span class="k">COMMENT</span> <span class="s1">'Курс продажи'</span><span class="p">,</span>
  <span class="nv">`ts`</span> <span class="nb">datetime</span> <span class="k">DEFAULT</span> <span class="k">current_timestamp</span><span class="p">()</span> <span class="k">COMMENT</span> <span class="s1">'Время в которое сделка по последней цене была зафиксирована'</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">11</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span> <span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_unicode_ci</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">'Изменение цены'</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = @saved_cs_client */</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Dumping data for table `price`</span>
<span class="c1">--</span>

<span class="k">LOCK</span> <span class="n">TABLES</span> <span class="nv">`price`</span> <span class="k">WRITE</span><span class="p">;</span>
<span class="cm">/*!40000 ALTER TABLE `price` DISABLE KEYS */</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nv">`price`</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">833143</span><span class="p">.</span><span class="mi">663441</span><span class="p">,</span><span class="mi">7083</span><span class="p">.</span><span class="mi">640000</span><span class="p">,</span><span class="s1">'1974-02-28 12:14:53'</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">506349</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">13</span><span class="p">.</span><span class="mi">956034</span><span class="p">,</span><span class="s1">'1989-08-25 08:13:42'</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">3</span><span class="p">.</span><span class="mi">100000</span><span class="p">,</span><span class="s1">'1977-01-24 01:27:13'</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">30754203</span><span class="p">.</span><span class="mi">895000</span><span class="p">,</span><span class="mi">22564</span><span class="p">.</span><span class="mi">976107</span><span class="p">,</span><span class="s1">'2005-03-20 21:58:47'</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">607602067</span><span class="p">.</span><span class="mi">694800</span><span class="p">,</span><span class="mi">692</span><span class="p">.</span><span class="mi">700000</span><span class="p">,</span><span class="s1">'1995-05-31 22:30:59'</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">55</span><span class="p">.</span><span class="mi">747000</span><span class="p">,</span><span class="mi">131</span><span class="p">.</span><span class="mi">327840</span><span class="p">,</span><span class="s1">'2011-06-04 13:19:14'</span><span class="p">),(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">4047695</span><span class="p">.</span><span class="mi">239467</span><span class="p">,</span><span class="mi">9294</span><span class="p">.</span><span class="mi">278000</span><span class="p">,</span><span class="s1">'1991-08-02 18:28:19'</span><span class="p">),(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">2053</span><span class="p">.</span><span class="mi">700000</span><span class="p">,</span><span class="mi">42688565</span><span class="p">.</span><span class="mi">419750</span><span class="p">,</span><span class="s1">'1995-09-23 02:06:23'</span><span class="p">),(</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">29</span><span class="p">.</span><span class="mi">743971</span><span class="p">,</span><span class="mi">5</span><span class="p">.</span><span class="mi">057628</span><span class="p">,</span><span class="s1">'2002-05-03 05:17:56'</span><span class="p">),(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">56795556</span><span class="p">.</span><span class="mi">100000</span><span class="p">,</span><span class="mi">3272</span><span class="p">.</span><span class="mi">168110</span><span class="p">,</span><span class="s1">'1994-03-20 04:59:16'</span><span class="p">);</span>
<span class="cm">/*!40000 ALTER TABLE `price` ENABLE KEYS */</span><span class="p">;</span>
<span class="n">UNLOCK</span> <span class="n">TABLES</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Table structure for table `report`</span>
<span class="c1">--</span>

<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="nv">`report`</span><span class="p">;</span>
<span class="cm">/*!40101 SET @saved_cs_client     = @@character_set_client */</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = utf8 */</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`report`</span> <span class="p">(</span>
  <span class="nv">`id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="nv">`trading_data`</span> <span class="nb">datetime</span> <span class="k">DEFAULT</span> <span class="k">current_timestamp</span><span class="p">()</span> <span class="k">COMMENT</span> <span class="s1">'Дата отчета'</span><span class="p">,</span>
  <span class="nv">`item_id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ссылается на валюту, используемую в качестве базовой валюты для данного товара'</span><span class="p">,</span>
  <span class="nv">`currency_id`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ссылается на валюту, используемую в качестве базовой валюты для данного товара'</span><span class="p">,</span>
  <span class="nv">`first_price`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Начальная цена'</span><span class="p">,</span>
  <span class="nv">`last_price`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Последняя цена'</span><span class="p">,</span>
  <span class="nv">`min_price`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Минимальная цена'</span><span class="p">,</span>
  <span class="nv">`max_price`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Максимальная цена'</span><span class="p">,</span>
  <span class="nv">`avg_price`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Средняя цена'</span><span class="p">,</span>
  <span class="nv">`total_amount`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Общая сумма, уплаченная за этот товар в течение отчетного периода.'</span><span class="p">,</span>
  <span class="nv">`quantity`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Количество товаров, проданных в течение данного отчетного периода.'</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">11</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span> <span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_unicode_ci</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">'Отчет'</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = @saved_cs_client */</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Dumping data for table `report`</span>
<span class="c1">--</span>

<span class="k">LOCK</span> <span class="n">TABLES</span> <span class="nv">`report`</span> <span class="k">WRITE</span><span class="p">;</span>
<span class="cm">/*!40000 ALTER TABLE `report` DISABLE KEYS */</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nv">`report`</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">'2008-09-12 05:40:01'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">11284</span><span class="p">.</span><span class="mi">100000</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">2113910</span><span class="p">.</span><span class="mi">285725</span><span class="p">,</span><span class="mi">33</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">'2005-08-05 11:49:42'</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">.</span><span class="mi">124000</span><span class="p">,</span><span class="mi">17</span><span class="p">.</span><span class="mi">382430</span><span class="p">,</span><span class="mi">2</span><span class="p">.</span><span class="mi">353250</span><span class="p">,</span><span class="mi">2569858</span><span class="p">.</span><span class="mi">500000</span><span class="p">,</span><span class="mi">15130</span><span class="p">.</span><span class="mi">120000</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="s1">'1985-04-14 09:07:10'</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">43490527</span><span class="p">.</span><span class="mi">885671</span><span class="p">,</span><span class="mi">1452</span><span class="p">.</span><span class="mi">364336</span><span class="p">,</span><span class="mi">26509</span><span class="p">.</span><span class="mi">073543</span><span class="p">,</span><span class="mi">135</span><span class="p">.</span><span class="mi">213446</span><span class="p">,</span><span class="mi">341326328</span><span class="p">.</span><span class="mi">324550</span><span class="p">,</span><span class="mi">33705</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">45819518</span><span class="p">.</span><span class="mi">090000</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="s1">'2018-02-14 00:52:19'</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">649342</span><span class="p">.</span><span class="mi">981000</span><span class="p">,</span><span class="mi">3</span><span class="p">.</span><span class="mi">424990</span><span class="p">,</span><span class="mi">991</span><span class="p">.</span><span class="mi">284828</span><span class="p">,</span><span class="mi">4063</span><span class="p">.</span><span class="mi">439875</span><span class="p">,</span><span class="mi">1324038</span><span class="p">.</span><span class="mi">780000</span><span class="p">,</span><span class="mi">9267588</span><span class="p">.</span><span class="mi">571890</span><span class="p">,</span><span class="mi">133722</span><span class="p">.</span><span class="mi">790635</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="s1">'2003-12-24 09:46:13'</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">2413</span><span class="p">.</span><span class="mi">800000</span><span class="p">,</span><span class="mi">3</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">170787253</span><span class="p">.</span><span class="mi">391930</span><span class="p">,</span><span class="mi">221895</span><span class="p">.</span><span class="mi">722237</span><span class="p">,</span><span class="mi">2782544</span><span class="p">.</span><span class="mi">825000</span><span class="p">,</span><span class="mi">196</span><span class="p">.</span><span class="mi">304264</span><span class="p">,</span><span class="mi">85386572</span><span class="p">.</span><span class="mi">462400</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="s1">'2014-11-14 05:28:06'</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">.</span><span class="mi">320848</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">120899</span><span class="p">.</span><span class="mi">185986</span><span class="p">,</span><span class="mi">351820</span><span class="p">.</span><span class="mi">630000</span><span class="p">,</span><span class="mi">44</span><span class="p">.</span><span class="mi">353438</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">2229</span><span class="p">.</span><span class="mi">320343</span><span class="p">),(</span><span class="mi">7</span><span class="p">,</span><span class="s1">'2000-11-12 21:49:52'</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">69682369</span><span class="p">.</span><span class="mi">400000</span><span class="p">,</span><span class="mi">211162</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">119454</span><span class="p">.</span><span class="mi">460000</span><span class="p">,</span><span class="mi">37212568</span><span class="p">.</span><span class="mi">372855</span><span class="p">,</span><span class="mi">2133133</span><span class="p">.</span><span class="mi">264035</span><span class="p">,</span><span class="mi">153722219</span><span class="p">.</span><span class="mi">685720</span><span class="p">,</span><span class="mi">5557523</span><span class="p">.</span><span class="mi">960000</span><span class="p">),(</span><span class="mi">8</span><span class="p">,</span><span class="s1">'2021-07-08 17:06:56'</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">341</span><span class="p">.</span><span class="mi">300000</span><span class="p">,</span><span class="mi">1861</span><span class="p">.</span><span class="mi">743223</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">337996</span><span class="p">,</span><span class="mi">49</span><span class="p">.</span><span class="mi">590397</span><span class="p">,</span><span class="mi">8522</span><span class="p">.</span><span class="mi">873563</span><span class="p">,</span><span class="mi">2269</span><span class="p">.</span><span class="mi">709000</span><span class="p">,</span><span class="mi">16999</span><span class="p">.</span><span class="mi">627000</span><span class="p">),(</span><span class="mi">9</span><span class="p">,</span><span class="s1">'2003-12-11 22:56:40'</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">20354369</span><span class="p">.</span><span class="mi">167190</span><span class="p">,</span><span class="mi">3144</span><span class="p">.</span><span class="mi">140230</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">800314</span><span class="p">,</span><span class="mi">305</span><span class="p">.</span><span class="mi">165000</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">136590</span><span class="p">,</span><span class="mi">215</span><span class="p">.</span><span class="mi">070000</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">),(</span><span class="mi">10</span><span class="p">,</span><span class="s1">'1999-04-10 21:50:09'</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">4736112</span><span class="p">.</span><span class="mi">251411</span><span class="p">,</span><span class="mi">1569</span><span class="p">.</span><span class="mi">689600</span><span class="p">,</span><span class="mi">52377</span><span class="p">.</span><span class="mi">000310</span><span class="p">,</span><span class="mi">492851</span><span class="p">.</span><span class="mi">324047</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">33864985</span><span class="p">.</span><span class="mi">940000</span><span class="p">,</span><span class="mi">68705694</span><span class="p">.</span><span class="mi">321598</span><span class="p">);</span>
<span class="cm">/*!40000 ALTER TABLE `report` ENABLE KEYS */</span><span class="p">;</span>
<span class="n">UNLOCK</span> <span class="n">TABLES</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Table structure for table `trade`</span>
<span class="c1">--</span>

<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="nv">`trade`</span><span class="p">;</span>
<span class="cm">/*!40101 SET @saved_cs_client     = @@character_set_client */</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = utf8 */</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`trade`</span> <span class="p">(</span>
  <span class="nv">`id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="nv">`item_id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ссылка на товар'</span><span class="p">,</span>
  <span class="nv">`seller_id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ссылка на трейдера'</span><span class="p">,</span>
  <span class="nv">`buyer_id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Ссылка на трейдера'</span><span class="p">,</span>
  <span class="nv">`quantity`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Количество товаров'</span><span class="p">,</span>
  <span class="nv">`unit_price`</span> <span class="nb">decimal</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Цена за единицу'</span><span class="p">,</span>
  <span class="nv">`description`</span> <span class="nb">text</span> <span class="k">COLLATE</span> <span class="n">utf8mb4_unicode_ci</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Все дополнительные сведения (например, количество выпущенных акций) в текстовом формате.'</span><span class="p">,</span>
  <span class="nv">`offer_id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Индификатор сделки'</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">11</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span> <span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_unicode_ci</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">'Сделки'</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = @saved_cs_client */</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Dumping data for table `trade`</span>
<span class="c1">--</span>

<span class="k">LOCK</span> <span class="n">TABLES</span> <span class="nv">`trade`</span> <span class="k">WRITE</span><span class="p">;</span>
<span class="cm">/*!40000 ALTER TABLE `trade` DISABLE KEYS */</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nv">`trade`</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">.</span><span class="mi">460000</span><span class="p">,</span><span class="mi">58902033</span><span class="p">.</span><span class="mi">493045</span><span class="p">,</span><span class="s1">'Dolores officiis quas necessitatibus qui amet. Id error atque laborum ea maiores rerum voluptatem eum. Et tempora pariatur quaerat laborum. Placeat ipsa tenetur maiores architecto.'</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">28389</span><span class="p">.</span><span class="mi">028300</span><span class="p">,</span><span class="mi">64</span><span class="p">.</span><span class="mi">144119</span><span class="p">,</span><span class="s1">'Dolorem perspiciatis consequatur eaque est corporis adipisci. Quae numquam quo provident alias natus eligendi. Voluptas ratione velit eveniet aperiam.'</span><span class="p">,</span><span class="mi">2</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">267929</span><span class="p">.</span><span class="mi">007257</span><span class="p">,</span><span class="mi">3002</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="s1">'Distinctio facere ullam nostrum commodi. Mollitia ea quo aut labore eaque. Aliquam dolores porro ut magni vitae dolore a nostrum.'</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">9942452</span><span class="p">.</span><span class="mi">040000</span><span class="p">,</span><span class="mi">572582523</span><span class="p">.</span><span class="mi">427500</span><span class="p">,</span><span class="s1">'Cumque fugit similique culpa et ad. Temporibus dolores ut sint ipsum voluptas a et. Dolore et totam tempora dolorem ea. Unde dolore velit perspiciatis exercitationem.'</span><span class="p">,</span><span class="mi">4</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">679040271</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">73901</span><span class="p">.</span><span class="mi">498440</span><span class="p">,</span><span class="s1">'Totam quisquam unde possimus voluptatibus quos praesentium provident. Et magnam aspernatur aut cupiditate eaque et non. Minima ex ut unde ut magni.'</span><span class="p">,</span><span class="mi">5</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">11415</span><span class="p">.</span><span class="mi">933040</span><span class="p">,</span><span class="mi">34761</span><span class="p">.</span><span class="mi">863528</span><span class="p">,</span><span class="s1">'Necessitatibus laudantium fugit porro. A et reprehenderit iusto ut deleniti ut. Et inventore aut culpa quibusdam eveniet aut nulla.'</span><span class="p">,</span><span class="mi">6</span><span class="p">),(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">4</span><span class="p">.</span><span class="mi">820000</span><span class="p">,</span><span class="mi">77</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="s1">'Corporis provident natus neque et. Libero nostrum aut minima impedit. Libero quos et beatae eos. Facere et officia quis et quia.'</span><span class="p">,</span><span class="mi">7</span><span class="p">),(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">667543</span><span class="p">.</span><span class="mi">999204</span><span class="p">,</span><span class="mi">422918</span><span class="p">.</span><span class="mi">783910</span><span class="p">,</span><span class="s1">'Autem rerum est nostrum placeat nulla. Velit cumque eius a enim. Dolor harum dignissimos sunt ea. Consectetur rerum eius ratione rerum nisi ipsam perspiciatis.'</span><span class="p">,</span><span class="mi">8</span><span class="p">),(</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">280068485</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="s1">'Voluptatem veritatis consectetur libero autem reiciendis. Animi qui aut animi sed perspiciatis. Reprehenderit officia iure occaecati molestiae ipsam ipsa. Quo qui laudantium provident veniam aut.'</span><span class="p">,</span><span class="mi">9</span><span class="p">),(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000000</span><span class="p">,</span><span class="mi">107806</span><span class="p">.</span><span class="mi">940000</span><span class="p">,</span><span class="s1">'Ipsa ut veniam deserunt quis. Ipsam labore aspernatur cupiditate et molestiae. Animi voluptatem vel reprehenderit tempora. At doloribus facere voluptatem dignissimos dolorem.'</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
<span class="cm">/*!40000 ALTER TABLE `trade` ENABLE KEYS */</span><span class="p">;</span>
<span class="n">UNLOCK</span> <span class="n">TABLES</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Table structure for table `trader`</span>
<span class="c1">--</span>

<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="nv">`trader`</span><span class="p">;</span>
<span class="cm">/*!40101 SET @saved_cs_client     = @@character_set_client */</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = utf8 */</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`trader`</span> <span class="p">(</span>
  <span class="nv">`id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="nv">`firstname`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">COLLATE</span> <span class="n">utf8mb4_unicode_ci</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Имя'</span><span class="p">,</span>
  <span class="nv">`lastname`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">COLLATE</span> <span class="n">utf8mb4_unicode_ci</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Фамилия'</span><span class="p">,</span>
  <span class="nv">`user_name`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">COLLATE</span> <span class="n">utf8mb4_unicode_ci</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Логин у всех уникальный'</span><span class="p">,</span>
  <span class="nv">`email`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span> <span class="k">COLLATE</span> <span class="n">utf8mb4_unicode_ci</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="nv">`confirmation_code`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span> <span class="k">COLLATE</span> <span class="n">utf8mb4_unicode_ci</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Код, отправленный пользователю для завершения процесса регистрации.'</span><span class="p">,</span>
  <span class="nv">`time_registered`</span> <span class="nb">datetime</span> <span class="k">DEFAULT</span> <span class="k">current_timestamp</span><span class="p">(),</span>
  <span class="nv">`time_confirmed`</span> <span class="nb">datetime</span> <span class="k">DEFAULT</span> <span class="k">current_timestamp</span><span class="p">(),</span>
  <span class="nv">`country_id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Страна, в которой живет.'</span><span class="p">,</span>
  <span class="nv">`preffered_currency_id`</span> <span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">unsigned</span> <span class="k">DEFAULT</span> <span class="k">NULL</span> <span class="k">COMMENT</span> <span class="s1">'Валюта, которую трейдер предпочитает'</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">),</span>
  <span class="k">UNIQUE</span> <span class="k">KEY</span> <span class="nv">`user_name`</span> <span class="p">(</span><span class="nv">`user_name`</span><span class="p">),</span>
  <span class="k">UNIQUE</span> <span class="k">KEY</span> <span class="nv">`email`</span> <span class="p">(</span><span class="nv">`email`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">11</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span> <span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_unicode_ci</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">'юзеры'</span><span class="p">;</span>
<span class="cm">/*!40101 SET character_set_client = @saved_cs_client */</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Dumping data for table `trader`</span>
<span class="c1">--</span>

<span class="k">LOCK</span> <span class="n">TABLES</span> <span class="nv">`trader`</span> <span class="k">WRITE</span><span class="p">;</span>
<span class="cm">/*!40000 ALTER TABLE `trader` DISABLE KEYS */</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nv">`trader`</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">'Gideon'</span><span class="p">,</span><span class="s1">'Hettinger'</span><span class="p">,</span><span class="s1">'nweissnat'</span><span class="p">,</span><span class="s1">'hilda.schulist@example.com'</span><span class="p">,</span><span class="s1">'sdaj'</span><span class="p">,</span><span class="s1">'1994-07-02 14:22:41'</span><span class="p">,</span><span class="s1">'1973-09-17 17:51:44'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">'Antwon'</span><span class="p">,</span><span class="s1">'Rogahn'</span><span class="p">,</span><span class="s1">'eva.stoltenberg'</span><span class="p">,</span><span class="s1">'grussel@example.org'</span><span class="p">,</span><span class="s1">'cddo'</span><span class="p">,</span><span class="s1">'1979-12-08 07:45:35'</span><span class="p">,</span><span class="s1">'1990-02-28 17:41:55'</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="s1">'Letitia'</span><span class="p">,</span><span class="s1">'Cremin'</span><span class="p">,</span><span class="s1">'bergnaum.tyra'</span><span class="p">,</span><span class="s1">'berniece.feeney@example.com'</span><span class="p">,</span><span class="s1">'jrip'</span><span class="p">,</span><span class="s1">'2005-05-27 20:49:06'</span><span class="p">,</span><span class="s1">'1990-05-07 05:33:38'</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="s1">'Braulio'</span><span class="p">,</span><span class="s1">'Hessel'</span><span class="p">,</span><span class="s1">'andreanne97'</span><span class="p">,</span><span class="s1">'margarita71@example.net'</span><span class="p">,</span><span class="s1">'zqnt'</span><span class="p">,</span><span class="s1">'2006-01-12 00:24:22'</span><span class="p">,</span><span class="s1">'2021-04-16 22:24:14'</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="s1">'Clementine'</span><span class="p">,</span><span class="s1">'Zboncak'</span><span class="p">,</span><span class="s1">'orion53'</span><span class="p">,</span><span class="s1">'sawayn.keara@example.net'</span><span class="p">,</span><span class="s1">'tkwo'</span><span class="p">,</span><span class="s1">'2004-09-08 13:05:57'</span><span class="p">,</span><span class="s1">'2009-04-21 11:36:19'</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="s1">'Alvis'</span><span class="p">,</span><span class="s1">'Gutkowski'</span><span class="p">,</span><span class="s1">'ikovacek'</span><span class="p">,</span><span class="s1">'ikovacek@example.net'</span><span class="p">,</span><span class="s1">'supc'</span><span class="p">,</span><span class="s1">'2009-10-11 20:46:23'</span><span class="p">,</span><span class="s1">'2003-04-14 08:48:12'</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">),(</span><span class="mi">7</span><span class="p">,</span><span class="s1">'Raphael'</span><span class="p">,</span><span class="s1">'Sanford'</span><span class="p">,</span><span class="s1">'mcdermott.providenci'</span><span class="p">,</span><span class="s1">'leonie94@example.org'</span><span class="p">,</span><span class="s1">'ibjn'</span><span class="p">,</span><span class="s1">'1975-03-27 19:01:54'</span><span class="p">,</span><span class="s1">'2000-12-20 15:01:59'</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">),(</span><span class="mi">8</span><span class="p">,</span><span class="s1">'Ruthie'</span><span class="p">,</span><span class="s1">'Dietrich'</span><span class="p">,</span><span class="s1">'lyost'</span><span class="p">,</span><span class="s1">'powlowski.hillary@example.org'</span><span class="p">,</span><span class="s1">'mdzm'</span><span class="p">,</span><span class="s1">'2005-02-19 04:07:58'</span><span class="p">,</span><span class="s1">'1993-08-30 12:18:06'</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">),(</span><span class="mi">9</span><span class="p">,</span><span class="s1">'Keagan'</span><span class="p">,</span><span class="s1">'Gutmann'</span><span class="p">,</span><span class="s1">'kpredovic'</span><span class="p">,</span><span class="s1">'kody.gibson@example.com'</span><span class="p">,</span><span class="s1">'ejxu'</span><span class="p">,</span><span class="s1">'2001-09-05 00:29:11'</span><span class="p">,</span><span class="s1">'2016-07-10 15:52:51'</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">8</span><span class="p">),(</span><span class="mi">10</span><span class="p">,</span><span class="s1">'Marianne'</span><span class="p">,</span><span class="s1">'Ziemann'</span><span class="p">,</span><span class="s1">'jace.kunde'</span><span class="p">,</span><span class="s1">'qbergnaum@example.com'</span><span class="p">,</span><span class="s1">'qozb'</span><span class="p">,</span><span class="s1">'1991-04-13 01:13:57'</span><span class="p">,</span><span class="s1">'1987-11-14 13:35:07'</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">9</span><span class="p">);</span>
<span class="cm">/*!40000 ALTER TABLE `trader` ENABLE KEYS */</span><span class="p">;</span>
<span class="n">UNLOCK</span> <span class="n">TABLES</span><span class="p">;</span>
<span class="cm">/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */</span><span class="p">;</span>

<span class="cm">/*!40101 SET SQL_MODE=@OLD_SQL_MODE */</span><span class="p">;</span>
<span class="cm">/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */</span><span class="p">;</span>
<span class="cm">/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */</span><span class="p">;</span>
<span class="cm">/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */</span><span class="p">;</span>
<span class="cm">/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */</span><span class="p">;</span>
<span class="cm">/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */</span><span class="p">;</span>
<span class="cm">/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */</span><span class="p">;</span>

<span class="c1">-- Dump completed on 2021-09-02 19:36:59</span>

<span class="k">UPDATE</span> <span class="n">trader</span> <span class="k">SET</span> <span class="n">country_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="mi">3</span><span class="p">));</span>
<span class="k">UPDATE</span> <span class="n">offer</span> <span class="k">SET</span> <span class="n">item_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="mi">3</span><span class="p">));</span>
<span class="k">UPDATE</span> <span class="n">offer</span> <span class="k">SET</span> <span class="n">trader_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="mi">3</span><span class="p">));</span>
<span class="k">UPDATE</span> <span class="n">offer</span> <span class="k">SET</span> <span class="n">price</span> <span class="o">=</span> <span class="p">(</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100000</span><span class="p">));</span>
<span class="k">UPDATE</span> <span class="n">offer</span> <span class="k">SET</span> <span class="n">buy</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">WHERE</span> <span class="n">sell</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">offer</span> <span class="k">SET</span> <span class="n">buy</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">WHERE</span> <span class="n">sell</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">trade</span> <span class="k">SET</span> <span class="n">seller_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="mi">3</span><span class="p">));</span>
<span class="k">UPDATE</span> <span class="n">trade</span> <span class="k">SET</span> <span class="n">buyer_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="mi">3</span><span class="p">));</span>
<span class="k">UPDATE</span> <span class="n">trade</span> <span class="k">SET</span> <span class="n">buyer_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="mi">3</span><span class="p">))</span> <span class="k">WHERE</span> <span class="n">buyer_id</span> <span class="o">=</span> <span class="n">seller_id</span> <span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">trade</span> <span class="k">SET</span> <span class="n">quantity</span> <span class="o">=</span> <span class="p">(</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000000</span><span class="p">));</span>
<span class="k">UPDATE</span> <span class="n">trade</span> <span class="k">SET</span> <span class="n">unit_price</span> <span class="o">=</span> <span class="p">(</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">));</span>
<span class="k">UPDATE</span> <span class="n">trade</span> <span class="k">SET</span> <span class="n">item_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="mi">3</span><span class="p">));</span>
<span class="k">UPDATE</span> <span class="n">trade</span> <span class="k">SET</span> <span class="n">offer_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="mi">3</span><span class="p">));</span>
<span class="k">UPDATE</span> <span class="n">report</span> <span class="k">SET</span> <span class="n">currency_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="mi">3</span><span class="p">));</span>
<span class="k">UPDATE</span> <span class="n">trader</span> <span class="k">SET</span> <span class="n">birthday</span> <span class="o">=</span> <span class="k">CURRENT_DATE</span><span class="p">()</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="p">(</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">20</span> <span class="o">+</span> <span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="mi">60</span><span class="p">))</span> <span class="nb">YEAR</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="6-cкрипты-характерных-выборок">
<a class="anchor" href="#6-c%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B-%D1%85%D0%B0%D1%80%D0%B0%D0%BA%D1%82%D0%B5%D1%80%D0%BD%D1%8B%D1%85-%D0%B2%D1%8B%D0%B1%D0%BE%D1%80%D0%BE%D0%BA" aria-hidden="true"><span class="octicon octicon-link"></span></a>6. Cкрипты характерных выборок</h3>

<p>Я конечно создал первые выборки из моей логики, но выборок конечно надо намного больше</p>

<p>Распределение трейдеров по странам</p>

<pre><code class="language-SQL">CREATE VIEW trader_country AS
SELECT c.country, COUNT(*) AS number_people FROM trader t JOIN country c ON t.country_id = c.id GROUP BY c.country ;
</code></pre>

<p>Распределение количества предложений на покупку по трейдерам</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">VIEW</span> <span class="n">trader_offer_buy</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">VIEW</span> <span class="n">trader_offer_buy</span> <span class="k">AS</span>
<span class="k">SELECT</span> <span class="n">user_name</span><span class="p">,</span>  <span class="k">COUNT</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">buy</span><span class="p">)</span> <span class="k">AS</span> <span class="n">sum_offer_buy</span> <span class="k">FROM</span> <span class="n">trader</span> <span class="n">t</span> <span class="k">JOIN</span> <span class="n">offer</span> <span class="n">o</span> <span class="k">ON</span> <span class="n">t</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">trader_id</span> <span class="k">WHERE</span> <span class="n">o</span><span class="p">.</span><span class="n">buy</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">t</span><span class="p">.</span><span class="n">user_name</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">sum_offer_buy</span> <span class="k">DESC</span><span class="p">;</span>
</code></pre></div></div>

<p>Распределение количества предложений на продажу по трейдерам</p>

<pre><code class="language-SQL">DROP VIEW trader_offer_sell;
CREATE VIEW trader_offer_sell AS
SELECT user_name,  COUNT(o.sell) AS sum_offer_sell FROM trader t JOIN offer o ON t.id = o.trader_id WHERE o.sell = 1 GROUP BY t.user_name ORDER BY sum_offer_sell DESC;

SELECT * FROM trader_country tc ;

SELECT * FROM trader_offer_sell ;

SELECT * FROM trader_offer_buy tob  ;
</code></pre>

<h3 id="7-создание-триггеров">
<a class="anchor" href="#7-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D1%82%D1%80%D0%B8%D0%B3%D0%B3%D0%B5%D1%80%D0%BE%D0%B2" aria-hidden="true"><span class="octicon octicon-link"></span></a>7. Создание триггеров</h3>

<p>Триггер для проверки что возраст не пустое значение</p>

<pre><code class="language-SQL">DROP TRIGGER IF EXISTS trader_age;

DELIMITER //

CREATE TRIGGER trader_age BEFORE UPDATE ON trader
FOR EACH ROW
BEGIN
	IF NEW.birthday IS NULL THEN
		SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Необходимо добавить дату рождения';
    END IF;
END//

DELIMITER ;
</code></pre>

<p>Триггер для проверки что трейдер совершенолетний</p>

<pre><code class="language-SQL">DROP TRIGGER IF EXISTS trader_age;

DELIMITER //

CREATE TRIGGER trader_age BEFORE UPDATE ON trader
FOR EACH ROW
BEGIN
    IF NEW.birthday &gt;= CURRENT_DATE() - INTERVAL 18 YEAR THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Подождите когда вам исполниться 18';
    END IF;
END//

DELIMITER ;
</code></pre>

<p>Триггер для проверки что трейдер одновременно не выставляет одну и ту-же позицию сразу на продажу и покупку</p>

<pre><code class="language-SQL">DROP TRIGGER IF EXISTS trader_age;

DELIMITER //

CREATE TRIGGER trader_age BEFORE UPDATE ON trader
FOR EACH ROW
BEGIN
    IF NEW.sell = 1 AND NEW.buy = 1 THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Нельзя совершать одновременно покупку и продажу';
    END IF;
END//

DELIMITER ;
</code></pre>

<p>Триггер для проверки что трейдер выбрал или покупку или продажу</p>

<pre><code class="language-SQL">DROP TRIGGER IF EXISTS trader_age;

DELIMITER //

CREATE TRIGGER trader_age BEFORE UPDATE ON trader
FOR EACH ROW
BEGIN
    IF NEW.sell = 0 AND NEW.buy = 0 THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Надо выбрать одну из операций';
    END IF;
END//

DELIMITER ;
</code></pre>
<p>Вот и весь код. Оценили на отлично. В конце цитата преподавателя:</p>

<blockquote>
  <p>Хорошо, что позаботились об индексах.
ENGINE = InnoDB - значение по умолчанию. его писать необязательно. но хорошо, что Вы знаете про эту опцию.
В SQL в общем случае принято именовать поля таблиц в единственном числе, а таблицы можно называть во множественном числе. важно придерживаться выбранного стиля (все в ед.ч. либо все в мн.ч.).
Наиболее популярные запросы (часто исполняемые) есть смысл сохранить в виде представлений.
Хорошо, что реализовали представления, триггеры, не все до этого доходят.
Успехов в дальнейшем обучении!</p>
</blockquote>

  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="Zmey56/blog"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/course%20project/mysql/geekbrain/2021/09/04/course-project-classification.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>An easy to use blogging platform with support for Jupyter Notebooks.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/Zmey56" title="Zmey56"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/Zmey56" title="Zmey56"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
